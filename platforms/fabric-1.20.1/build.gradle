apply plugin: "dev.architectury.loom"
base {
    archivesName = rootProject.modid + "-fabric"
}

loom {
    splitEnvironmentSourceSets()
    mods {
        "modid" {
            sourceSet sourceSets.main
            sourceSet sourceSets.client
        }
    }

}

dependencies {
    minecraft "com.mojang:minecraft:1.20.1"
    mappings(loom.layered {
        it.mappings "net.fabricmc:yarn:${rootProject.yarn_mappings_1201}:v2"
        it.parchment("org.parchmentmc.data:parchment-1.20.1:${rootProject.parchment_version_1201}@zip")
    })
    modImplementation "net.fabricmc:fabric-loader:${rootProject.fabric_loader_version}"
    modImplementation "net.fabricmc.fabric-api:fabric-api:${rootProject.fabric_api_version_1201}"
    modImplementation "maven.modrinth:Hephaestus:${rootProject.Hephaestus_version_1201}"
    modCompileOnly "com.klikli_dev:modonomicon-1.20.1-common:${rootProject.modonomicon_version}"
    modImplementation "com.klikli_dev:modonomicon-1.20.1-fabric:${rootProject.modonomicon_version}"
}

processResources {
    inputs.property "version", rootProject.version
    filesMatching("fabric.mod.json") {
        expand "version": rootProject.version
    }
}

java {
    withSourcesJar()
}

jar {
    from("LICENSE") {
        rename { "${it}_${project.base.archivesName.get()}"}
    }
}